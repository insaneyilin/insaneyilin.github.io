<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  
  <meta name="description" content="《Ruby语言入门教程v1.0》笔记（2）

第四章 Ruby面向对象初探1. 封装让我们来定义一个类， 类名是 Person， 类名首字母要大写；   
属性有姓名@name、年龄@age、国籍@motherland，实例变量用@开头；方法有一个，叫 talk, 方法名和参数名应该用一个小写字母开头或者用一个下划线开头。
class Person
  def initialize(name, age = 18)
    @name = name
    @age = age
    @motherland = &amp;quot;China&amp;quot;
  end  # 初始化方法结束
  def talk
    puts &amp;quot;my name is &amp;quot; + @name + &amp;quot;, age is &amp;quot; + @age.to_s
    if @motherland == &amp;quot;China&amp;quot;
      puts &amp;quot;I am a Chinese.&amp;quot;
    else
      puts &amp;quot;I am a foreigner.&amp;quot;
    end
  end  # talk方法结束
  attr_writer :motherland  # @motherland的setter
end

p1 = Person.new(&amp;quot;Yilin&amp;quot;, 23)
p1.talk

p2 = Person.new(&amp;quot;Ben&amp;quot;)
p2.motherland = &amp;quot;ABC&amp;quot;
p2.talk
initialize 是初始化方法，相当于构造函数。参数 age 有一个缺省值 18，可以在任何方法内使用缺省参数,而不仅仅是 initialize。   
如果有缺省参数， 参数表必须以有缺省值的参数结尾。
注意我们定义了@motherland成员变量的setter：">
  

  
  
  
  
  
  
  <title>Ruby Quick Start (2) -- Objects in Ruby | Yilin&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="《Ruby语言入门教程v1.0》笔记（2）  第四章 Ruby面向对象初探1. 封装让我们来定义一个类， 类名是 Person， 类名首字母要大写；    属性有姓名@name、年龄@age、国籍@motherland，实例变量用@开头；方法有一个，叫 talk, 方法名和参数名应该用一个小写字母开头或者用一个下划线开头。 class Person   def initialize(name, a">
<meta name="keywords" content="Ruby">
<meta property="og:type" content="article">
<meta property="og:title" content="Ruby Quick Start (2) -- Objects in Ruby">
<meta property="og:url" content="https://yilingui.xyz/2014/05/28/ruby_quickstart_notes_2/index.html">
<meta property="og:site_name" content="Yilin&#39;s Blog">
<meta property="og:description" content="《Ruby语言入门教程v1.0》笔记（2）  第四章 Ruby面向对象初探1. 封装让我们来定义一个类， 类名是 Person， 类名首字母要大写；    属性有姓名@name、年龄@age、国籍@motherland，实例变量用@开头；方法有一个，叫 talk, 方法名和参数名应该用一个小写字母开头或者用一个下划线开头。 class Person   def initialize(name, a">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-07-02T17:00:21.743Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ruby Quick Start (2) -- Objects in Ruby">
<meta name="twitter:description" content="《Ruby语言入门教程v1.0》笔记（2）  第四章 Ruby面向对象初探1. 封装让我们来定义一个类， 类名是 Person， 类名首字母要大写；    属性有姓名@name、年龄@age、国籍@motherland，实例变量用@开头；方法有一个，叫 talk, 方法名和参数名应该用一个小写字母开头或者用一个下划线开头。 class Person   def initialize(name, a">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  

  <link rel="stylesheet" href="/css/desert.css">
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src="//push.zhanzhang.baidu.com/push.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head></html>
<body class="home blog custom-background custom-font-enabled single-author">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Yilin&#39;s Blog" rel="home">Yilin&#39;s Blog</a>
      </h1>
      
        <h2 class="site-description">
          <a href="/" id="subtitle">WRYYYYY!</a>
        </h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/about">About</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://yilingui.xyz/wiki/">Wiki</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/daily_thoughts">Daily Thoughts</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/photos">Photos</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://github.com/insaneyilin">Github</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://www.zhihu.com/people/insaneguy">Zhihu</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://weibo.com/guiyilin">WEIBO</a></li>
                
                </ul>
            </div>
    </nav>
</header>

      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main"><article id="post-ruby_quickstart_notes_2" class="post-ruby_quickstart_notes_2 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        
  
    <h1 class="entry-title article-title">
      Ruby Quick Start (2) -- Objects in Ruby
    </h1>
  

        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="https://yilingui.xyz/2014/05/28/ruby_quickstart_notes_2/" data-id="ck10rvb6r003zqfbhvidtoiet" class="leave-reply bdsharebuttonbox" data-cmd="more"></a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p><a href="http://www.open-open.com/doc/view/86a9fdd174dc44c18191d985e845a7c4" target="_blank" rel="noopener">《Ruby语言入门教程v1.0》</a>笔记（2）<br><br></p>
<hr>
<h2 id="第四章-Ruby面向对象初探"><a href="#第四章-Ruby面向对象初探" class="headerlink" title="第四章 Ruby面向对象初探"></a>第四章 Ruby面向对象初探</h2><h3 id="1-封装"><a href="#1-封装" class="headerlink" title="1. 封装"></a>1. 封装</h3><p>让我们来定义一个类， 类名是 <code>Person</code>， <strong>类名首字母要大写</strong>；   
属性有姓名<code>@name</code>、年龄<code>@age</code>、国籍<code>@motherland</code>，实例变量用<code>@</code>开头；<br>方法有一个，叫 <code>talk</code>, 方法名和参数名应该用一个小写字母开头或者用一个下划线开头。</p>
<pre><code class="ruby">class Person
  def initialize(name, age = 18)
    @name = name
    @age = age
    @motherland = &quot;China&quot;
  end  # 初始化方法结束
  def talk
    puts &quot;my name is &quot; + @name + &quot;, age is &quot; + @age.to_s
    if @motherland == &quot;China&quot;
      puts &quot;I am a Chinese.&quot;
    else
      puts &quot;I am a foreigner.&quot;
    end
  end  # talk方法结束
  attr_writer :motherland  # @motherland的setter
end

p1 = Person.new(&quot;Yilin&quot;, 23)
p1.talk

p2 = Person.new(&quot;Ben&quot;)
p2.motherland = &quot;ABC&quot;
p2.talk</code></pre>
<p><code>initialize</code> 是初始化方法，相当于构造函数。<br>参数 <code>age</code> 有一个缺省值 <code>18</code>，可以在任何方法内使用缺省参数,而不仅仅是 <code>initialize</code>。   
如果有缺省参数， 参数表必须以有缺省值的参数结尾。</p>
<p>注意我们定义了<code>@motherland</code>成员变量的setter：</p>
<a id="more"></a>
<pre><code class="ruby">attr_writer :motherland</code></pre>
<p>相当于</p>
<pre><code class="ruby">def motherland=(value)
  return @motherland = value
end </code></pre>
<p>类似的可以定义getter:</p>
<pre><code class="ruby">attr_reader :motherland</code></pre>
<p>相当于</p>
<pre><code class="ruby">def motherland
  return @motherland
end </code></pre>
<br>

<hr>
<h3 id="2-继承"><a href="#2-继承" class="headerlink" title="2. 继承"></a>2. 继承</h3><pre><code class="ruby">class Student &lt; Person
  def talk
    puts &quot;I am a student. my name is &quot;+@name+&quot;, age is &quot;+@age.to_s
  end  # talk 方法结束
end  # Student 类结束

p3 = Student.new(&quot;Guy&quot;, 23); p3.talk
p4 = Student.new(&quot;Ben&quot;); p4.talk</code></pre>
<p>用<code>&lt;</code>表示 <code>Student</code> 类是 <code>Person</code> 类的子类。<code>Person</code> 类的一切，<code>Student</code> 类都能继承。<br>但是 <code>Student</code> 类重写了 <code>talk</code> 方法，所以我们看到了不同的运行结果。<br>子类继承父类的时候， 除了重写方法也可以添加一些新的方法；<br>或是增强父类的方法(用关键字 <code>super</code> 指明)。</p>
<p>现在说一说 <code>new</code> 方法。<br><code>Person</code> 类没有定义 <code>new</code> 方法，为什么生成 <code>Person</code> 类的具体实例要用 <code>new</code>？   
<code>Ruby</code> 语言已经定义了一个类 <code>Object</code>，如果你在定义新类的时候，没有指明新类的父类，那么Ruby解释器认为，新类的父类是 <code>Object</code> 类。<br>类 <code>Object</code> 含有 <code>new</code> 方法、<code>initialize</code> 方法等等，只要你不重写这些方法，你就自然在使用类 <code>Object</code> 的方法。</p>
<p>你写一个类的时候，是在创造一类事物的蓝图；当你 <code>new</code> 的时候，一个实例就按照蓝图生成了。</p>
<p>蓝图早已设计好了，<code>new</code> 的时候就是出生的时刻，那么，何时消亡呢？<br>这里没有 C++ 的析构函数，也没有 Java 的 <code>finalize()</code> 方法，Ruby 语言内建了一个比 Java更灵巧的<strong>垃圾收集器</strong>， 当某个实例不再与其它代码交互了， 垃圾收集器就回收它占用的系统资源，这个实例自然也就不存在了。<br>垃圾收集器是一段代码，它作它的工作，自动地、不知疲倦地随着系统一同运作，并无自己的喜恶。</p>
<br>

<hr>
<h3 id="3-多态"><a href="#3-多态" class="headerlink" title="3. 多态"></a>3. 多态</h3><pre><code class="ruby">class Worker &lt; Person
  def talk
    puts &quot;I am a worker. my name is &quot;+@name+&quot;, age is &quot;+@age.to_s
  end  # talk 方法结束
end  # Worker 类结束

p5 = Worker.new(&quot;InsaneGuy&quot;, 23); p5.talk
p6 = Worker.new(&quot;Ben&quot;); p6.talk</code></pre>
<p>Ruby 语言，只有重写(override) ，没有其它语言具有的严格意义上的重载(overload)。</p>
<p>Ruby 语言有自己的单例方法，还有模块插入(Mix-in)，后面会深入探讨 Ruby 语言的面向对象特征。</p>
<br>
<br>

<hr>
<h2 id="第五章-Why-Ruby"><a href="#第五章-Why-Ruby" class="headerlink" title="第五章 Why Ruby?"></a>第五章 Why Ruby?</h2><p>当你决定学习或使用一门语言的时候，首先要回答的问题就是：Why XXX? 而不是一开始就去比较语言的优劣。</p>
<p>语言有优劣吗？有！肯定有！但是没有绝对的优劣，在不同的情景下选择合适的语言才是程序员应该关注的。</p>
<p>XXX可以是C++，Java，Python，当然现在要讨论的是Ruby。</p>
<p>Java是强静态语言，与软件的快速开发无缘。</p>
<p>C++不仅兼容C，而且囊括了模板、范型等特性，包罗万象。无论是系统调用、网络开发、数据库操作都能显试身手，可是<strong>程序员很难掌握这些</strong>，即使想熟练应用其中某一方面也不容易。</p>
<p>Ruby 灵巧，快速，但<strong>其实并不简单</strong>。</p>
<p>Ruby中实现一个小功能，可以有 3 种甚至 4 种完全不同的思路与方法，因为Ruby在语法层次实现了冗余，但是这样一来：</p>
<ol>
<li>程序员深入掌握 Ruby 变得不很容易；</li>
<li>程序员们相互读懂代码也很难；</li>
<li>软件生产是一种大规模群体合作的行为。许多软件公司有自己的编码规范，促使员工编码风格统一，以便于:<ul>
<li>程序解耦重构</li>
<li>代码复用</li>
<li>人员流动后项目如期推进。</li>
</ul>
</li>
</ol>
<p>Java 撇下 C++，成为软件工业的支柱语言，正是得力于此。</p>
<p>Ruby 灵巧，快速，千变万化，没有统一风格，难于解耦，<strong>在目前，自然不适合工业生产</strong>。</p>
<p>Ruby 的语法中有许多<strong>容易产生歧义</strong>的地方，假如没有较深的功力、良好的编码风格（比如空格的使用） ，很容易犯错。软件生产总是偏向于成熟方案、成熟工具的。</p>
<p>Ruby语言具有动态特征，代码行为随时可以改变(比如可以重定义实例的方法)。</p>
<p>编程语言的发展可以分两大类，一类<strong>函数式语言</strong>，一类<strong>命令式语言</strong>。</p>
<p>命令式语言将操作数演化成现在我们熟悉的变量，将操作码演化成方法（或叫函数），对变量执行各种操作。</p>
<p>面向对象编程又将基本变量和方法封装在一起， 成为一个更复杂的变量——对象。</p>
<p>但是， 在一个类中仍然区分基本变量和方法。</p>
<p>函数式语言则不同，一开始的函数式语言不区分变量和方法，一切都是表（list），表就是能够不断分解成单个元素的数学符号。</p>
<p>表可以是变量，可以是方法。后来的有些函数式语言，吸取了命令式语言的语法，也区分变量和方法。</p>
<p>变量有哪些特征呢？</p>
<ol>
<li>变量有名字；</li>
<li>变量代表的那个事物应该有一个可以用数学度量的值；长度，面积，速度大小，磁场强度等</li>
<li>为了区别事物，我们将事物分成几个基本类型。所以，代表不同类型的事物，变量也就有了不同的类型。</li>
<li>事物总是有产生到消亡的一个过程，因此，代表事物的变量，也就有了生命期。在程序中，我们把变量的生命期，称之为变量的作用域。</li>
</ol>
<p>作为一个使用者，1. 2. 是必须的。至于类型、生命期，与我何干？某个变量，我使用一下就丢弃了。</p>
<p>由编译内核（或解释内核）在运行时刻来判断变量类型的语言，叫动态类型语言。</p>
<p>在运行中，变量能够随时代表不同的事物，而不管事物是什么类型，这种语言，叫弱类型语言。这里的“弱”，是指弱化了类型的概念，不理会类型的差异。</p>
<p>Ruby 语言还是有基本类型。至于变量作用域，纯粹的函数式语言中是没有这个概念的。Ruby 中是有变量作用域概念的，还记得变量名前缀字符($表示全局变量，@表示实例变量，@@表示类变量)吗？实际应用中，有时会比较复杂，使用闭包时就知道了。</p>
<p>Ruby 是动态类型语言，不用给任何变量指定数据类型，解释器会在你第一次赋值给变量时，在内部将数据类型记录下来。</p>
<p>Ruby 语言中，一个变量被赋予了某个数据类型的值，在程序中你可以随时再赋予这个变量其它数据类型的值。</p>
<pre><code class="ruby">a = 5
print &quot;a = &quot;, a, &quot; &quot;, a.class, &quot;\n&quot;
a = &quot;hh&quot;
print &quot;a = &quot;, a, &quot; &quot;, a.class, &quot;\n&quot;</code></pre>
<p>Ruby 的动态类型特点是一把双刃剑，熟手游刃有余，生手常常伤着自己。</p>
<p>在没有了编译器查错的日子里，又没有完全驾驭 Ruby 之前，如何避免常常出错呢？</p>
<p>有一个下口之处，就是死盯住<strong>变量的命名</strong>。用一些有意义的名字，不必太长， 但是应该少用单字符， 除非是循环指针变量。</p>
<p>你也许认为我自己能看懂就行了，这是十分有害的想法。<strong>在一个项目组中，程序员是要彼此相互沟通合作的。当坏习惯养成后，要改是很难的</strong>。</p>
<p>Ruby是动态语言，你可以改变Ruby程序的结构，功能。</p>
<p>在Ruby程序运行中，方法、属性可以被加入或去除，新的类或对象可以被建立，新的模块可以出现：</p>
<pre><code class="ruby">class Person
  def talk
    puts &quot;Today is Saturday. &quot;
  end
end
p1 = Person.new
p1.talk  # Today is Saturday

class Person
  def talk
    puts &quot;Today is #@date. &quot;
  end
  attr_accessor :date
end
p1.date = &quot;Sunday&quot;    
p1.talk  # Today is Sunday.</code></pre>
<p>除了修改方法，添加方法，你还可以除去方法：</p>
<pre><code class="ruby">class Person
  def talk
    puts &quot;Today is Saturday. &quot;
  end
end
p1 = Person.new
p1.talk  # Today is Saturday.
class Person
  undef :talk  # undef关键字将talk方法定义为不可使用
end
# p1.talk talk方法已经不存在</code></pre>
<p>Ruby语言灵活，因为Ruby是动态语言；Ruby语言强大，因为Ruby是动态语言；Ruby语言初学者容易犯错误，也因为Ruby是动态语言。</p>
<br>

<hr>
<h3 id="Ruby的一些编码建议"><a href="#Ruby的一些编码建议" class="headerlink" title="Ruby的一些编码建议"></a>Ruby的一些编码建议</h3><h4 id="一-命名"><a href="#一-命名" class="headerlink" title="一. 命名"></a>一. 命名</h4><p>常量全用大写的字母，用下划线分割单词。例如：<code>MAX</code>, <code>ARRAY_LENGTH</code>。  </p>
<p>类名和模块名用大写字母开头的单词组合而成。例如：<code>MyClass</code>, <code>Person</code>。</p>
<p>方法名全用小写的字母，用下划线分割单词。例如：<code>talk</code>, <code>is_prime?</code>。</p>
<p>在Ruby里,有时将<code>!</code>和<code>?</code>附于某些方法名后面。</p>
<p>惊叹号<code>!</code>暗示这个方法具有破坏性, 有可能会改变传入的参数。</p>
<p>问号<code>?</code>表示这个方法是一个布尔方法，只会返回 <code>true</code> 或 <code>false</code> 。</p>
<p>变量和参数用小写字母开头的单词组合而成。例如：<code>name</code>, <code>currentValue</code>。</p>
<p>类名、模块名、变量名、参数名最好使用“名词”或者“形容词＋名词”。</p>
<p>方法名最好使用“动词”或者“动词＋名词”。例如：<code>aStudent.talk</code></p>
<br>

<hr>
<h4 id="二-空格和圆括号"><a href="#二-空格和圆括号" class="headerlink" title="二. 空格和圆括号"></a>二. 空格和圆括号</h4><p>关键字之后要留空格。</p>
<p>逗号<code>,</code>、分号<code>;</code>之后要留空格。</p>
<p>赋值操作符、 比较操作符、 算术操作符、 逻辑操作符， 如<code>=</code>、<code>+=</code>、<code>&gt;=</code>、<code>&lt;=</code>、<code>+</code>、<code>*</code>、<code>%</code>、<code>&amp;&amp;</code>、<code>||</code>等二元操作符的前后应当加空格。</p>
<p>一元操作符如<code>!</code>、<code>~</code>等之后不加空格。</p>
<p>像<code>[]</code>、<code>.</code>、<code>::</code>这类操作符前后不加空格。</p>
<p>函数名之后不要留空格，紧跟左圆括号<code>(</code>，以与关键字区别。</p>
<p>左圆括号<code>(</code>向后紧跟，右圆括号<code>)</code>向前紧跟，紧跟处不留空格。</p>
<p>Ruby中圆括号常常被省略：</p>
<pre><code class="ruby">def talk name
  &quot;Hi! &quot; + name
end
puts talk &quot;Yilin&quot;     
puts talk(&quot;Yilin&quot;)     
puts (talk &quot;Yilin&quot;) 
puts (talk(&quot;Yilin&quot;))</code></pre>
<p>优先规则会自动确定哪个参数被哪个方法使用。但是，生活并不总是美好的，事情经常变得复杂。<br>所以建议除了极简单的情况，还是使用圆括号为好。</p>
<p>圆括号还可以把几个语句约束成一个语句集合：</p>
<pre><code class="ruby">a = 3
b = 1; a += b if 3 &gt; 5
print &quot;a = &quot;, a, &quot;\n&quot; # a = 3
print &quot;b = &quot;, b, &quot;\n&quot; # b = 1
c = 3
(d = 1; c += d) if 3 &gt; 5
print &quot;c = &quot;, c, &quot;\n&quot; # c = 3
print &quot;d = &quot;, d, &quot;\n&quot; # d = nil
# 条件为假，语句集合里的变量d 没有被赋值</code></pre>
<br>

<hr>
<h4 id="三-使用-return"><a href="#三-使用-return" class="headerlink" title="三. 使用 return"></a>三. 使用 return</h4><p>你在定义方法的时候，在最后一行可以显式地 <code>return</code> 某个值或几个值，但却不是必须的。</p>
<p>Ruby 方法的最后一行语句如果是表达式，表达式的值会被自动返回；最后一行语句如果不是表达式，就什么也不返回。</p>
<p><code>return</code> 并不仅仅用在方法的最后一行。</p>
<p>使用 <code>break</code> 你能够跳出本层循环，如果要从多重循环体中跳出，可以使用 <code>return</code> ，结束这个方法； <code>return</code> 还能够从方法的某个执行点立即退出，而不理会方法的其余代码。</p>
<br>

<hr>
<h4 id="四-注释"><a href="#四-注释" class="headerlink" title="四. 注释"></a>四. 注释</h4><p>养成写注释的习惯吧！你见过没有路标的高速公路吗？</p>
<p>注释表明了一段代码块的功能、意图或是代码块的解释，应该简洁明了，错误的注释不如没有注释。</p>
<p>一般地，注释的位置应与被描述的代码相邻，可以放在代码的上方或右方，不要放在代码的下方。</p>
<br>
<br>

<hr>
<h2 id="第六章-深入Ruby面向对象"><a href="#第六章-深入Ruby面向对象" class="headerlink" title="第六章 深入Ruby面向对象"></a>第六章 深入Ruby面向对象</h2><h3 id="1-重载与重写"><a href="#1-重载与重写" class="headerlink" title="1. 重载与重写"></a>1. 重载与重写</h3><p>在 Java 中，重载(overload)和重写(override)是用来表现多态性的两种重要方式。</p>
<p>override 也有译作“覆盖”、“覆写”。Java 中称作“覆写”比较恰当。</p>
<p>重载方法是指一个类中，<strong>方法名相同、参数列表不同</strong>的几个方法，调用时根据不同的参数调用不同的方法。方法重载与返回类型无关。</p>
<p>覆写方法是指子类有一个方法，<strong>方法名、参数列表、返回类型</strong>与父类的某个方法<strong>完全一致</strong>。 调用时会调用子类的方法， 而屏蔽掉父类的同名方法。 </p>
<p>需要注意的是，子类覆写的方法，其可访问性一定要强于或等同于，父类被覆写的同名方法。</p>
<p>覆写发生在子类和父类之间， 当然也可以是子类和父类的父类之间。 </p>
<p>重载不仅仅是发生在子类和父类之间，大多数时候，发生在同一个类中。</p>
<p>“ Ruby 语言， 只有重写， 没有其它语言具有的严格意义上的重载。 ”</p>
<p>由于 Ruby 同时支持缺省参数和可变参数，所以 Ruby 不支持重载。</p>
<p>如果在同一个类中写两个同名方法，总是写在后面的方法被执行。</p>
<p><strong>在 Ruby 中，我们说覆写是指重写，我们说重载也是指重写</strong>。</p>
<p>Ruby 是动态语言，可以随时改变类的属性、方法，所以覆写和重载的重要性就降低了。仔细体会一下，一者是增大可选择性，一者是随时修改。</p>
<br>

<hr>
<h3 id="2-增强父类方法"><a href="#2-增强父类方法" class="headerlink" title="2. 增强父类方法"></a>2. 增强父类方法</h3><p>如果我们只是想增强父类的方法，而不是完全地替代它,就可以用关键字 <code>super</code> 指明。</p>
<pre><code class="ruby">class Person
  def talk(name)
    print &quot;my name is #{name}.&quot;
  end
end

class Student &lt; Person
  def talk(name)
    super
    print &quot;and I&#39;m a student.\n&quot;
  end
end

aPerson = Person.new
aPerson.talk(&quot;Yilin&quot;) # my name is Yilin.
print &quot;\n\n&quot;
aStudent = Student.new
aStudent.talk(&quot;Yilin&quot;) # my name is Yilin.and I&#39;m a student.</code></pre>
<br>

<hr>
<h3 id="3-实例变量、类变量、类方法"><a href="#3-实例变量、类变量、类方法" class="headerlink" title="3. 实例变量、类变量、类方法"></a>3. 实例变量、类变量、类方法</h3><p>如果一个变量，只能被某个实例对象使用，这样的变量称之为实例变量；如果一个变量，能被某个类的所有实例对象共享，这样的变量称之为类变量。</p>
<p>Ruby的常量可以定义在类和模块中，不能定义在方法中。</p>
<p>如果在外部访问类或模块中的常量，要使用 域作用符<code>::</code>。</p>
<p>全局变量用<code>$</code>开头。</p>
<p>实例变量，变量名用<code>@</code>开头；类变量，变量名用<code>@@</code>开头。</p>
<p>Ruby 中所说的局部变量，可以是存在于类中、方法中、模块中、一个循环中、一个过程对象中。<strong>局部变量名用小写字母开头</strong>。</p>
<p>如果我们希望一类事物共享某个变量，类变量能够很好地实现这个需求。</p>
<pre><code class="ruby">class StudentClass
  @@count = 0
  def initialize( name )
    @name = name
    @@count += 1
  end
  def talk
    puts &quot;I am #@name, This class have #@@count students.&quot;
  end
end

p1 = StudentClass.new(&quot;Student 1 &quot;)
p2 = StudentClass.new(&quot;Student 2 &quot;)
p3 = StudentClass.new(&quot;Student 3 &quot;)
p4 = StudentClass.new(&quot;Student 4 &quot;)
p3.talk  # I am Student 3 , This class have 4 students.
p4.talk  # I am Student 4 , This class have 4 students.</code></pre>
<p>与全局变量和实例变量不同，<strong>类变量在使用前必须要初始化</strong>；全局变量和实例变量如果没有初始化，其值为 <code>nil</code> 。</p>
<p>类方法——不依赖于任何特定实例对象的方法。类方法与实例方法的定义方式不同， 定义类方法要在方法名前加上类名和一个点号<code>.</code>。</p>
<p>类方法的主要作用是为了<strong>访问类变量</strong>。</p>
<pre><code class="ruby">class StudentClass
  @@count = 0
  def initialize
    @@count += 1
  end
  def StudentClass.student_count
    puts &quot;This class have #@@count students.&quot;
  end
end
p1 = StudentClass.new
p2 = StudentClass.new
StudentClass.student_count  # This class have 2 students.
p3 = StudentClass.new
p4 = StudentClass.new
StudentClass.student_count  # This class have 4 students.</code></pre>
<br>

<hr>
<h3 id="4-单例方法"><a href="#4-单例方法" class="headerlink" title="4. 单例方法"></a>4. 单例方法</h3><p>同一份设计蓝图（类），不同的实例对象，可以表现出不同的行为特征，这种（不牵涉继承的） 多态性在 Java 这样的静态语言里， 通过方法重载得到具体实现。</p>
<p>前面我们分析知道了 Ruby 中的重载是指重写， Ruby 如何来反映不同实例对象的不同行为特征呢？</p>
<p>在 Ruby 里，可以给具体的实例对象添加实例方法，这个方法只属于这个实例对象，我们把这样的方法称之为单例方法。</p>
<pre><code class="ruby">class Person
  def talk
    puts &quot;Hi! &quot;
  end
end
p1 = Person.new
p2 = Person.new
def p2.talk  # 定义单例方法 p2.talk
  puts &quot;Here is p2. &quot;
end
def p2.laugh  # 定义单例方法 p2. laugh
  puts &quot;ha,ha,ha... &quot;
end
p1.talk  # Hello!
p2.talk  # Here is p2.
p2.laugh  # ha,ha,ha...</code></pre>
<p>实例方法，属于类的每个实例对象。单例方法只出现在单个实例对象中。</p>
<p>用单例方法可以极大地丰富多态性在 Ruby 中的表现力。</p>
<br>

<hr>
<h3 id="5-Ruby中的访问控制"><a href="#5-Ruby中的访问控制" class="headerlink" title="5. Ruby中的访问控制"></a>5. Ruby中的访问控制</h3><p>在 Ruby 里，要读取，或是改变对象的属性，唯一的途径是调用对象的方法。</p>
<p>控制了对方法的访问，也就控制了对对象属性的访问。</p>
<table border="1"> <tr> <th>访问控制</th> <th>意义</th> </tr> <tr> <th>public</th> <th>可以被任何实例对象调用，不存在访问控制；</th> </tr> <tr> <th>protected</th> <th>可以被定义它的类和其子类访问，可以在类中或子类中指定给实例对象；</th> </tr> <tr> <th>private</th> <th>可以被定义它的类和其子类访问，不能被实例对象调用。</th> </tr> </table>

<br>

<p>方法默认都是公有的（ <code>initialize</code> 方法除外，它永远是私有的）。</p>
<pre><code class="ruby">class Person
  def talk
    puts &quot; public :talk, 将调用 speak&quot;
    speak
  end
  def speak
    puts &quot;protected :speak,将调用 laugh&quot;
    laugh
  end
  def laugh
    puts &quot; private:laugh&quot;
  end
  protected :speak
  private :laugh
end
p1 = Person.new
p1.talk
# p1.speak 实例对象不能访问 protected 方法
# p1.laugh 实例对象不能访问 private 方法</code></pre>
<ul>
<li>public 方法，可以被定义它的类和其子类访问，可以被类和子类的实例对象调用；</li>
<li>protected 方法， 可以被定义它的类和其子类访问， 不能被类和子类的实例对象直接调用，但是可以在类和子类中指定给实例对象；</li>
<li>private 方法，可以被定义它的类和其子类访问，私有方法不能指定对象。（即不能用a.method这种方式访问）</li>
</ul>
<p>可以根据自己的需要，在程序的不同位置，改变某个方法的访问控制级别，让程序更加富于变化。</p>
<pre><code class="ruby">class Person
  private  # 后面的方法设定为 private
  def talk
    puts &quot; already talk &quot;
  end
end

p1 = Person.new
# p1.talk private 方法不能访问
class Person
  public :talk  # 动态声明talk为public
end
p1.talk     # already talk</code></pre>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2014/05/28/ruby_quickstart_notes_2/">
    <time datetime="2014-05-28T11:30:29.000Z" class="entry-date">
        2014-05-28
    </time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Programming/">Programming</a>
  </div>

    
  <span class="article-delim">&#8226;</span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ruby/">Ruby</a></li></ul>

    </footer>
</article>


    
<nav class="nav-single">
    <h3 class="assistive-text">文章导航</h3>
    
        <span class="nav-previous"><a href="/2014/05/28/scala_week3_notes/" rel="prev"><span class="meta-nav">←</span> Notes of Scala course on Coursera -- Week 3</a></span>
    
    
        <span class="nav-next"><a href="/2014/05/26/ruby_quickstart_notes_1/" rel="next">Ruby Quick Start (1) -- A Glimpse of Syntax <span class="meta-nav">→</span></a></span>
    
</nav><!-- .nav-single -->









<section id="comments" class="comments">
  <style>
    .comments{margin:30px;padding:10px;background:#fff}
    @media screen and (max-width:800px){.comments{margin:auto;padding:10px;background:#fff}}
  </style>
  <div id="vcomment" class="comment"></div> 
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
   var notify = 'true' == true ? true : false;
   var verify = 'false' == true ? true : false;
    window.onload = function() {
        new Valine({
            el: '.comment',
            notify: notify,
            verify: verify,
            app_id: "M7FPr33VN0cA59xJ3futR49a-gzGzoHsz",
            app_key: "AwLDuILTEjzxdq5Ppc1y7o0S",
            placeholder: "Comments are welcome. (Markdown is supported)",
            avatar:"mm"
        });
    }
</script>

  </section>

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Graphics/">Computer Graphics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Diary/">Diary</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Movie/">Movie</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/">Programming</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReadingNotes/">ReadingNotes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/casual-writing/">casual writing</a></li></ul>
    </div>
  </div>


  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2019/08/19/190819_movie_parasite/">韩国电影《寄生虫》观后感</a>
          </li>
        
          <li>
            <a href="/2019/07/21/190728_when_cyber_violence_comes_into_reality/">当网络暴力成为现实</a>
          </li>
        
          <li>
            <a href="/2019/07/10/190710_cpp_shared_object_pool/">一个简单的 C++ 对象池实现</a>
          </li>
        
          <li>
            <a href="/2019/06/24/190624_gaokao_10y/">高考10年</a>
          </li>
        
          <li>
            <a href="/2018/07/04/180704_dont_talk_about_sea_with_a_well_frog/">夏虫不可语冰，井蛙不可语海</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-content">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Debugging-Sucks/">Debugging Sucks</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/">Design Pattern</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Image-Processing/">Image Processing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kinect/">Kinect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenCV/">OpenCV</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ruby/">Ruby</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scala/">Scala</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/autonomous-driving/">autonomous_driving</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coursera/">coursera</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data-structure/">data structure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fp/">fp</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphics/">graphics</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kd-tree/">kd tree</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lambda-expression/">lambda expression</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/notes/">notes</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/octree/">octree</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/创业/">创业</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高考/">高考</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </aside>

  
    
  <aside class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-content tagcloud">
      <a href="/tags/C/" style="font-size: 20px;">C++</a> <a href="/tags/Debugging-Sucks/" style="font-size: 12.5px;">Debugging Sucks</a> <a href="/tags/Design-Pattern/" style="font-size: 10px;">Design Pattern</a> <a href="/tags/Image-Processing/" style="font-size: 10px;">Image Processing</a> <a href="/tags/Kinect/" style="font-size: 10px;">Kinect</a> <a href="/tags/OpenCV/" style="font-size: 12.5px;">OpenCV</a> <a href="/tags/Ruby/" style="font-size: 15px;">Ruby</a> <a href="/tags/Scala/" style="font-size: 17.5px;">Scala</a> <a href="/tags/autonomous-driving/" style="font-size: 10px;">autonomous_driving</a> <a href="/tags/coursera/" style="font-size: 20px;">coursera</a> <a href="/tags/data-structure/" style="font-size: 10px;">data structure</a> <a href="/tags/fp/" style="font-size: 17.5px;">fp</a> <a href="/tags/graphics/" style="font-size: 12.5px;">graphics</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/kd-tree/" style="font-size: 10px;">kd tree</a> <a href="/tags/lambda-expression/" style="font-size: 10px;">lambda expression</a> <a href="/tags/notes/" style="font-size: 20px;">notes</a> <a href="/tags/octree/" style="font-size: 10px;">octree</a> <a href="/tags/创业/" style="font-size: 10px;">创业</a> <a href="/tags/高考/" style="font-size: 10px;">高考</a>
    </div>
  </aside>

  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2019 Yilin Gui
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
    <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/js/share.js'];</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      <!--$表示行内元素，$$表示块状元素 -->
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script src="/js/jquery-3.3.1.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<!--prettify代码高亮脚本引入-->
<script src="/js/prettify.js"></script>
<script type="text/javascript">
$(window).on('load', function(){ 
  $('pre').addClass('prettyprint linenums');
  prettyPrint();
});
</script>

<!--Mermaid流程图-->
<script src="https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>

<!--引入不蒜子访问统计-->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div id="bg"></div>

  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>