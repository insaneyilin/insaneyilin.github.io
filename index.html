<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Yilin&#39;s blog</title>
  <meta name="author" content="insaneguy">
  
  <meta name="description" content="This guy is insane.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Yilin&#39;s blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Yilin&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Yilin&#39;s blog</a></h1>
  <h2><a href="/">This guy is insane.</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-07-05T09:56:29.000Z"><a href="/2015/07/05/150705_webgl_first_try/">07-05-2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/07/05/150705_webgl_first_try/">WebGL初探</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Coursera 上最近新开了一门课 <a href="http://www.coursera.org/course/webgl" target="_blank" rel="external">Interactive Computer Graphics with WebGL</a>，通过 WebGL 来介绍计算机图形学。</p>
<p>从本科时学习 OpenGL 1.x ，到研一重新学习 OpenGL 3.x 之后基于 shader 的方法，OpenGL 也算是我的一位老朋友了。现在 Web 开发热火朝天，桌面应用 Web 化早已成为趋势，我正好借着这门课学习下 WebGL，同时也了解一下网络前端开发。</p>
<p><br></p>
<h2 id="OpenGL">OpenGL</h2>
<p>OpenGL = Open Graphics Library，是图形硬件的一种标准软件接口，其最初由 SGI 创建，用于在不同硬件体系结构的图形设备上进行二维和三维图形的绘制。OpenGL 不是一种编程语言，也不是 OpenCV 之类的算法工具库，而是一个图形显示标准 API 集合。</p>
<p><br></p>
<h2 id="Modern_OpenGL">Modern OpenGL</h2>
<p>学习过 OpenGL 1.x 和 2.x 的朋友应该对 <code>glBegin()</code> 、<code>glVertex()</code> 和 <code>glEnd()</code> 印象深刻，使用这种方式绘制属于“立即模式”(immediate mode)，每次顶点被创建后都会由 CPU 发送给 GPU 进行绘制，从而造成了 CPU 和 GPU 之间的性能瓶颈。</p>
<p>立即模式在 OpenGL 3.1 及之后的版本已经被移除，Modern OpenGL 是基于 Shader 来进行图形的绘制的，即所有绘制工作都应由 GPU 负责，CPU 仅仅负责将要绘制的数据传送给 GPU。</p>
<p>Shader(着色器) 也是一种程序，其使用 GLSL(GL Shading Language) 编写，分为顶点着色器(vertex shader)和片段着色器(fragment shader)，前者处理顶点相关的属性，后者处理像素点相关的属性。着色器在程序运行时进行编译。</p>
<p>Modern OpenGL 通过“保留模式”(retained mode) 进行图形绘制：将所有顶点数据放在一个数组中，将该数组发送给 GPU ，通过 shaders 完成绘制。</p>
<p><br></p>
<h2 id="WebGL">WebGL</h2>
<p>WebGL 是 OpenGL ES 2.0 的 JavaScript 实现，是面向浏览器的 OpenGL。WebGL 可以与 HTML5、CSS 结合使用，借助本地系统显卡在浏览器中构建和显示三维场景与模型。</p>
<p>WebGL 使用 JavaScript 作为编程语言，尽管有一些问题和局限性，但能在浏览器轻松构建三维图形程序仍是一件很酷的事！</p>
<p><br></p>
<h2 id="第一个例子：绘制三角形">第一个例子：绘制三角形</h2>
<p>现在开始我们的第一个 WebGL 例子：绘制一个有颜色的二维三角形。</p>
<p>这里利用 <a href="http://www.cs.unm.edu/~angel/" target="_blank" rel="external">Edward Angel 教授</a>提供的<a href="http://www.cs.unm.edu/~angel/COURSERA/CODE/Common/" target="_blank" rel="external">辅助脚本</a>进行实现。</p>
<p>创建一个 WebGL 应用程序的基本步骤：</p>
<ul>
<li>创建 WebGL 上下文</li>
<li>创建顶点缓冲 (vertex buffer)</li>
<li>创建顶点着色器（vertex shader）和片段着色器（fragment shader）</li>
<li>编译着色器</li>
<li>创建程序对象，链接着色器</li>
<li>绘制场景</li>
</ul>
<p>Angel 教授提供的辅助脚本已经为我们封装了一些基本 WebGL 操作，因此我们只需要关心三个元素：</p>
<ul>
<li>vertex shader</li>
<li>fragment shader</li>
<li>HTML canvas</li>
</ul>
<p>HTML 文件与 JS 文件各有分工：</p>
<ul>
<li>HTML文件<ul>
<li>描述页面布局，包含 canvas 元素</li>
<li>加载 JS 脚本文件</li>
<li>包含顶点和片段着色器</li>
</ul>
</li>
<li>JS 文件<ul>
<li>创建 WebGL 上下文</li>
<li>创建顶点缓冲</li>
<li>编译、链接着色器</li>
<li>创建数据</li>
<li>渲染数据（绘制）</li>
</ul>
</li>
</ul>
<p>先来看一看 HTML 文件(myTriangle.html)：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">id</span>=<span class="value">"vertex-shader"</span> <span class="attribute">type</span>=<span class="value">"x-shader/x-vertex"</span>&gt;</span><span class="javascript"></span></div><div class="line">attribute vec4 vPosition;</div><div class="line"><span class="keyword">void</span> main() {</div><div class="line">  gl_Position = vPosition;</div><div class="line">}</div><div class="line"><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">id</span>=<span class="value">"fragment-shader"</span> <span class="attribute">type</span>=<span class="value">"x-shader/x-fragment"</span>&gt;</span><span class="javascript"></span></div><div class="line">precision mediump float;</div><div class="line"><span class="keyword">void</span> main() {</div><div class="line">  gl_FragColor = vec4(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</div><div class="line">}</div><div class="line"><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"../Common/webgl-utils.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"../Common/initShaders.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"myTriangle.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">canvas</span> <span class="attribute">id</span>=<span class="value">"gl-canvas"</span> <span class="attribute">width</span>=<span class="value">"512"</span> <span class="attribute">height</span>=<span class="value">"512"</span>&gt;</span></div><div class="line">Oops ... your browser doesn't support the HTML5 canvas element</div><div class="line"><span class="tag">&lt;/<span class="title">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>上面代码的底部是如下 HTML 代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">canvas</span> <span class="attribute">id</span>=<span class="value">"gl-canvas"</span> <span class="attribute">width</span>=<span class="value">"512"</span> <span class="attribute">height</span>=<span class="value">"512"</span>&gt;</span></div><div class="line">Oops ... your browser doesn't support the HTML5 canvas element</div><div class="line"><span class="tag">&lt;/<span class="title">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div></pre></td></tr></table></figure>

<p>整个文件只有这一段是页面的body部分代码，其余都是 js 代码。<code>&lt;canvas&gt;</code> 标签就是要显示图形的部分，这里设置了其 id 和宽高，在之后的 js 文件中会用到。</p>
<p>上面 HTML 文件中的 <code>&lt;head&gt;</code> 标签中定义了顶点着色器和片段着色器：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">id</span>=<span class="value">"vertex-shader"</span> <span class="attribute">type</span>=<span class="value">"x-shader/x-vertex"</span>&gt;</span><span class="javascript"></span></div><div class="line">attribute vec4 vPosition;</div><div class="line"><span class="keyword">void</span> main() {</div><div class="line">  gl_Position = vPosition;</div><div class="line">}</div><div class="line"><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">id</span>=<span class="value">"fragment-shader"</span> <span class="attribute">type</span>=<span class="value">"x-shader/x-fragment"</span>&gt;</span><span class="javascript"></span></div><div class="line">precision mediump float;</div><div class="line"><span class="keyword">void</span> main() {</div><div class="line">  gl_FragColor = vec4(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>);</div><div class="line">}</div><div class="line"><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div></pre></td></tr></table></figure>

<p>这里顶点着色器通过 vPosition 属性获取每个顶点的位置；片段着色器第一行声明浮点数精度，然后通过RGBA的四元向量设置片段着色器的输出颜色。</p>
<p>下面看一下 JS 文件(myTriangle.js)：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="pi">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> gl;</div><div class="line"><span class="keyword">var</span> points;</div><div class="line"></div><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> <span class="title">init</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"gl-canvas"</span>);</div><div class="line">	gl = WebGLUtils.setupWebGL(canvas);</div><div class="line">	<span class="keyword">if</span> (!gl) {</div><div class="line">		alert(<span class="string">"WebGL isn't available"</span>);</div><div class="line">	}</div><div class="line">	</div><div class="line">	<span class="keyword">var</span> vertices = <span class="keyword">new</span> <span class="built_in">Float32Array</span>([-<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>]);</div><div class="line">	</div><div class="line">	<span class="comment">// configure WebGL</span></div><div class="line">	gl.viewport(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">	gl.clearColor(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>);</div><div class="line">	</div><div class="line">	<span class="comment">// load shaders and initialize attribute buffers</span></div><div class="line">	<span class="keyword">var</span> program = initShaders(gl, <span class="string">"vertex-shader"</span>, <span class="string">"fragment-shader"</span>);</div><div class="line">	gl.useProgram(program);</div><div class="line">	</div><div class="line">	<span class="comment">// load the data into the GPU</span></div><div class="line">	<span class="keyword">var</span> bufferId = gl.createBuffer();</div><div class="line">	gl.bindBuffer(gl.ARRAY_BUFFER, bufferId);</div><div class="line">	gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);</div><div class="line">	</div><div class="line">	<span class="comment">// associate our shader variables with our data buffer</span></div><div class="line">	<span class="keyword">var</span> vPosition = gl.getAttribLocation(program, <span class="string">"vPosition"</span>);</div><div class="line">	gl.vertexAttribPointer(vPosition, <span class="number">2</span>, gl.FLOAT, <span class="literal">false</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">	gl.enableVertexAttribArray(vPosition);</div><div class="line">	</div><div class="line">	render();</div><div class="line">};</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span><span class="params">()</span> </span>{</div><div class="line">	gl.clear(gl.COLOR_BUFFER_BIT);</div><div class="line">	gl.drawArrays(gl.TRIANGLES, <span class="number">0</span>, <span class="number">3</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>首先通过 <code>document.getElementById</code> 找到 HTML 中的 canvas 元素；然后创建并设置 WebGL 上下文，加载着色器，创建数据缓冲；接着将数据载入 GPU，将着色器与顶点缓冲进行关联，完成绘制。</p>
<p>注意 <code>gl.vertexAttribPointer</code> 方法，该方法指示 WebGL 刚刚绑定在 gl.ARRAY_BUFFER 上的缓冲数据是如何组织的。该方法各个参数的意义如下：</p>
<ul>
<li>第一个参数告诉 WebGL 绑定的缓冲应作为哪个通用属性索引的输入</li>
<li>第二个参数定义每个位置信息要用多少个元素表示。这里是二维图形，每个位置由 x, y 两个分量组成</li>
<li>第三个参数表示元素为浮点类型</li>
<li>第四个参数为规范化标志</li>
<li>第五个参数为步长，0 表示默认紧凑存储</li>
<li>第六个参数是顶点数据类型中第一个元素的偏移值，由于这里只有位置数据，偏移值为 0 </li>
</ul>
<p><code>gl.enableVertexAttribArray(vPosition);</code> 用于激活顶点着色器中的位置属性。</p>
<p>WebGL 创建的应用可以轻松的通过网页展示。这里我使用 <a href="http://codepen.io" target="_blank" rel="external">CodePen</a> 展示上面绘制三角形的例子，效果如下：</p>
<p></p><p data-height="577" data-theme-id="0" data-slug-hash="vOROBW" data-default-tab="result" data-user="insaneguy" class="codepen">See the Pen <a href="http://codepen.io/insaneguy/pen/vOROBW/" target="_blank" rel="external">webgl_demos</a> by insaneguy (<a href="http://codepen.io/insaneguy" target="_blank" rel="external">@insaneguy</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-04-05T11:56:29.000Z"><a href="/2015/04/05/cheshire_cat_in_cpp-pimpl_idiom/">04-05-2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/04/05/cheshire_cat_in_cpp-pimpl_idiom/">柴郡猫技术--C++中的PIMPL设计模式</a></h1>
  

    </header>
    <div class="entry">
      
        <p>C++ 中的“柴郡猫技术”(Cheshire Cat Idiom)，又称为 PIMPL(Pointer to IMPLementation) ，<a href="http://en.wikipedia.org/wiki/Opaque_pointer" target="_blank" rel="external">Opaque Pointer</a> 等，是一种在类中只定义接口，而将私有数据成员封装在另一个实现类中的惯用法。该方法主要是为了隐藏类的数据以及减轻编译时的压力。</p>
<p>“柴郡猫”是什么鬼？就是下面这货：</p>
<p><img src="/imgs/20150405_cheshire_cat_in_cpp-pimpl_idiom/Cheshire_Cat.jpg" alt="Cheshire Cat"></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/04/05/cheshire_cat_in_cpp-pimpl_idiom/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-04-02T11:56:29.000Z"><a href="/2015/04/02/crop_pdf_with_OpenCV/">04-02-2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/04/02/crop_pdf_with_OpenCV/">使用 OpenCV 裁剪 PDF 页面</a></h1>
  

    </header>
    <div class="entry">
      
        <p>网上找到的一些课件讲义等资料有时候会是 PPT 多页打印而成的 PDF 文件，比如下图这种：</p>
<p><img src="/imgs/20150402_crop_pdf_with_OpenCV/slides_in_pdf.png" alt="slides in pdf"></p>
<p>有些人希望对 PDF 页面进行裁剪，将 PDF 还原为原 slides 那样一页一张演示文稿的形式。（其实我个人觉得没什么必要，因为不影响阅读，而且 PDF 格式读起来还不用频繁翻页了。）</p>
<p>前几天，我在知乎上看到了有这样需求的<a href="http://www.zhihu.com/question/29065981" target="_blank" rel="external">一个问题</a>。<br>当时想到用 Python 和 <a href="http://opencv.org/" target="_blank" rel="external">OpenCV</a> 来做这样的图像处理小任务应该很简单的吧。于是动手撸了段代码，简单的 <strong>“边缘检测+轮廓提取”</strong>，最后结果看起来还不错：</p>
<p><img src="/imgs/20150402_crop_pdf_with_OpenCV/pdf_cropped.png" alt="pdf cropped results"></p>
<p>下面给出 Python 代码并简单解释下。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/04/02/crop_pdf_with_OpenCV/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-03-30T14:56:29.000Z"><a href="/2015/03/30/lambda_expressions_in_cpp/">03-30-2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/03/30/lambda_expressions_in_cpp/">C++ 中的 lambda 表达式</a></h1>
  

    </header>
    <div class="entry">
      
        <p>lambda 表达式是函数式编程语言中一个很 cool 的特性，而 C++11 标准加入了对 lambda 表达式的支持。本篇文章对 C++11 中的 lambda 表达式做一个简单的介绍。</p>
<p><br></p>
<hr>
<h2 id="什么是_lambda_表达式">什么是 lambda 表达式</h2>
<p>说到 <a href="http://en.wikipedia.org/wiki/Lambda_Calculus" target="_blank" rel="external">lambda expression</a> 就不能不提 lambda calculus，前者是从后者中衍生出的概念，lambda calculus 有着严格的数学定义，与<a href="http://en.wikipedia.org/wiki/Turing_machine" target="_blank" rel="external">图灵机</a>有着等价的计算能力。这里只介绍编程语言中的 lambda 表达式概念。</p>
<p>在函数式编程语言中，函数是一等公民。有时我们需要一个函数，但又不想要定义一个具有名字的函数，即我们需要一个<strong>匿名函数</strong>，而一个 lambda 表达式实际上就是通过表达式的方式定义了一个匿名函数。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/03/30/lambda_expressions_in_cpp/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-03-25T13:56:29.000Z"><a href="/2015/03/25/rotation_matrix_and_quaternions/">03-25-2015</a></time>
      
      
  
    <h1 class="title"><a href="/2015/03/25/rotation_matrix_and_quaternions/">旋转矩阵与四元数</a></h1>
  

    </header>
    <div class="entry">
      
        <p>在计算机图形学的学习中，几何变换（Transformations）是一块重要的内容，我们使用齐次坐标（Homogeneous coordinates）描述点和向量，使用变换矩阵描述平移、旋转等变换。</p>
<p>而在平移、旋转、缩放这几种变换中，又以旋转的情况最为复杂。实际上，计算机图形学中三维空间的旋转不仅仅有旋转矩阵一种表达形式，欧拉角（Euler angles）和四元数（Quaternions）也是常用的方法。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/03/25/rotation_matrix_and_quaternions/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-07-16T14:15:19.000Z"><a href="/2014/07/16/kinect_dev_config_vs2013/">07-16-2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/07/16/kinect_dev_config_vs2013/">Kinect开发环境配置：Kinect for Windows SDK + OpenCV2.4.9 + VS2013 + Win8(x86)</a></h1>
  

    </header>
    <div class="entry">
      
        <p>OS为Windows 8 32位，VS2013已安装并可以正常使用。</p>
<h2 id="一-_安装和配置Kinect_for_Windows_SDK_v1-8">一. 安装和配置Kinect for Windows SDK v1.8</h2>
<p>在<a href="http://www.microsoft.com/en-us/kinectforwindowsdev/Start.aspx" target="_blank" rel="external">官方网站</a>下载<strong>Kinect for Windows SDK</strong>和<strong>Developer Toolkit</strong>：</p>
<p>KinectSDK-v1.8-Setup.exe （主要提供Kinect的驱动和设备访问接口）</p>
<p>KinectDeveloperToolkit-v1.8.0-Setup.exe （主要提供一些有助于开发的工具，包括Kinect Studio和多种编程语言的开发例程等）<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/07/16/kinect_dev_config_vs2013/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-06-03T14:30:29.000Z"><a href="/2014/06/03/ruby_quickstart_notes_4/">06-03-2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/06/03/ruby_quickstart_notes_4/">Ruby Quick Start (4) -- Array, String, Closure</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="http://www.open-open.com/doc/view/86a9fdd174dc44c18191d985e845a7c4" target="_blank" rel="external">《Ruby语言入门教程v1.0》</a>笔记（4）<br><br></p>
<hr>
<h2 id="第八章_Ruby中的数组、字符串、闭包">第八章 Ruby中的数组、字符串、闭包</h2>
<h3 id="1-_Ruby中的数组">1. Ruby中的数组</h3>
<h4 id="1-1_建立数组">1.1 建立数组</h4>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">arr1 = []</div><div class="line">arr2 = <span class="constant">Array</span>.new</div><div class="line">arr3 = [<span class="string">'4 '</span>, <span class="string">'5 '</span>, <span class="string">'6 '</span>]</div><div class="line">print arr1, <span class="string">"\n"</span></div><div class="line">print arr2, <span class="string">"\n"</span></div><div class="line">print arr3, <span class="string">"\n"</span></div></pre></td></tr></table></figure>

<p><br></p>
<hr>
<h4 id="1-2_访问数组元素">1.2 访问数组元素</h4>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">arr = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line">puts arr[<span class="number">0</span>]    <span class="comment"># 3</span></div><div class="line">puts arr.first    <span class="comment"># 3</span></div><div class="line">puts arr[arr.length-<span class="number">1</span>]    <span class="comment"># 9</span></div><div class="line">puts arr[arr.size-<span class="number">1</span>]    <span class="comment"># 9</span></div><div class="line">puts arr.last    <span class="comment"># 9</span></div><div class="line">puts arr[-<span class="number">1</span>]    <span class="comment"># 9</span></div><div class="line">puts arr[-<span class="number">2</span>]    <span class="comment"># 8</span></div><div class="line">print arr[<span class="number">1</span>..<span class="number">3</span>] ,<span class="string">"\n"</span>    <span class="comment"># 456</span></div><div class="line">print arr[-<span class="number">3</span>, <span class="number">2</span>] ,<span class="string">"\n"</span>    <span class="comment"># 78</span></div></pre></td></tr></table></figure>

<p>数组的索引从 <code>0</code> 开始，一直到数组的长度减去 <code>1</code>；</p>
<p>负数表示从数组末尾开始的索引；</p>
<p>用一对数字来索引数组，第一个数字表示开始位置，第二数字表示从开始位置起的元素数目。</p>
<p><br></p>
<hr>
<h4 id="1-3_增加、删除数组元素">1.3 增加、删除数组元素</h4>
<p>Ruby 的数组大小是动态的，你能够随时增加、删除数组元素。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/06/03/ruby_quickstart_notes_4/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-05-29T14:30:29.000Z"><a href="/2014/05/29/ruby_quickstart_notes_3/">05-29-2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/05/29/ruby_quickstart_notes_3/">Ruby Quick Start (3) -- Module, Mix-in</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="http://www.open-open.com/doc/view/86a9fdd174dc44c18191d985e845a7c4" target="_blank" rel="external">《Ruby语言入门教程v1.0》</a>笔记（3）</p>
<p><br></p>
<hr>
<h2 id="第六章_模块、命名空间、Mix-in">第六章 模块、命名空间、Mix-in</h2>
<h3 id="1-_Ruby中的模块">1. Ruby中的模块</h3>
<p>在程序中，相关的、不相关的代码的组合，叫作模块。一般情况下，我们总是把功能相关的代码放在一个模块里。</p>
<p>把功能相关的程序代码放在一个模块里， 体现了模块的第一个作用： 可以被其它程序代码重复使用。</p>
<p>数学中常用的函数， Ruby 中的 <code>Math</code> 模块都提供了。 每个使用 <code>Math</code> 模块的程序员无须再重复编写这些常用的函数与常数。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">puts <span class="constant">Math</span>.sqrt(<span class="number">2</span>)    <span class="comment"># 1.4142135623731</span></div><div class="line">puts <span class="constant">Math::PI</span>    <span class="comment"># 3.14159265358979</span></div></pre></td></tr></table></figure>

<p>定义模块用 <code>module...end</code> 。</p>
<p>模块与类非常相似，但是：</p>
<ul>
<li>模块不可以有实例对象；</li>
<li>模块不可以有子类。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/05/29/ruby_quickstart_notes_3/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-05-28T13:56:29.000Z"><a href="/2014/05/28/scala_week3_notes/">05-28-2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/05/28/scala_week3_notes/">Notes of Scala course on Coursera -- Week 3</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Here are my notes for the week 3’s lecture of <a href="https://www.coursera.org/course/progfun" target="_blank" rel="external">Functional Programming Principles in Scala</a> on <a href="https://www.coursera.org/" target="_blank" rel="external">Coursera</a>.</p>
<p><br><br><br></p>
<hr>
<h2 id="1-_Class_Hierarchies">1. Class Hierarchies</h2>
<h3 id="1-1_Abstract_Classes">1.1 Abstract Classes</h3>
<p>Consider the task of writing <em>a class for sets of integers</em> with the following operations.</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">IntSet</span> </span>{</div><div class="line">  <span class="keyword">def</span> incl(x: Int): IntSet</div><div class="line">  <span class="keyword">def</span> contains(x: Int): Boolean</div><div class="line">}</div></pre></td></tr></table></figure>



<p><code>IntSet</code> is an <em>abstract</em> class.</p>
<p>Abstract classes can contain members which are <em>missing an implementation</em> (in our case, <code>incl</code> and <code>contains</code> ).</p>
<p>Consequently, <strong>no instances</strong> of an abstract class can be created with the operator <code>new</code>.</p>
<p><br></p>
<hr>
<h3 id="1-2_Class_Extensions">1.2 Class Extensions</h3>
<p>Let’s consider implementing sets as <em>binary trees</em>.</p>
<p>There are two types of possible trees: a tree for the empty set, and a tree consisting of an integer and two sub-trees.</p>
<p>Here are their implementations:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Empty</span> <span class="keyword">extends</span> <span class="title">IntSet</span> </span>{</div><div class="line">  <span class="keyword">def</span> contains(x: Int): Boolean = <span class="keyword">false</span></div><div class="line">  <span class="keyword">def</span> incl(x: Int): IntSet = <span class="keyword">new</span> NonEmpty(x, <span class="keyword">new</span> Empty, <span class="keyword">new</span> Empty)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">NonEmpty</span><span class="params">(elem: Int, left: IntSet, right: IntSet)</span> <span class="keyword">extends</span> <span class="title">IntSet</span> </span>{</div><div class="line">  <span class="keyword">def</span> contains(x: Int): Boolean =</div><div class="line">    <span class="keyword">if</span> (x &lt; elem) left contains x</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &gt; elem) right contains x</div><div class="line">    <span class="keyword">else</span> <span class="keyword">true</span></div><div class="line">  <span class="keyword">def</span> incl(x: Int): IntSet =</div><div class="line">    <span class="keyword">if</span> (x &lt; elem) <span class="keyword">new</span> NonEmpty(elem, left incl x, right)</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &gt; elem) <span class="keyword">new</span> NonEmpty(elem, left, right incl x)</div><div class="line">    <span class="keyword">else</span> <span class="keyword">this</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>Empty and NonEmpty both <em>extend</em> the class <code>IntSet</code> .</p>
<p>This implies that the types <code>Empty</code> and <code>NonEmpty</code> <em>conform</em> to the type <code>IntSet</code></p>
<ul>
<li>an object of type <code>Empty</code> or <code>NonEmpty</code> can be used wherever an object of type <code>IntSet</code> is required.</li>
</ul>
<p><br></p>
<hr>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/05/28/scala_week3_notes/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-05-28T11:30:29.000Z"><a href="/2014/05/28/ruby_quickstart_notes_2/">05-28-2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/05/28/ruby_quickstart_notes_2/">Ruby Quick Start (2) -- Objects in Ruby</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="http://www.open-open.com/doc/view/86a9fdd174dc44c18191d985e845a7c4" target="_blank" rel="external">《Ruby语言入门教程v1.0》</a>笔记（2）<br><br></p>
<hr>
<h2 id="第四章_Ruby面向对象初探">第四章 Ruby面向对象初探</h2>
<h3 id="1-_封装">1. 封装</h3>
<p>让我们来定义一个类， 类名是 <code>Person</code>， <strong>类名首字母要大写</strong>；<br>属性有姓名<code>@name</code>、年龄<code>@age</code>、国籍<code>@motherland</code>，实例变量用<code>@</code>开头；<br>方法有一个，叫 <code>talk</code>, 方法名和参数名应该用一个小写字母开头或者用一个下划线开头。</p>
<figure class="highlight ruby"><figcaption><span>Person.rb</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></div><div class="line">  <span class="function"><span class="keyword">def</span> </span>initialize(name, age = <span class="number">18</span>)</div><div class="line">    <span class="variable">@name</span> = name</div><div class="line">    <span class="variable">@age</span> = age</div><div class="line">    <span class="variable">@motherland</span> = <span class="string">"China"</span></div><div class="line">  <span class="keyword">end</span>  <span class="comment"># 初始化方法结束</span></div><div class="line">  <span class="function"><span class="keyword">def</span> </span>talk</div><div class="line">    puts <span class="string">"my name is "</span> + <span class="variable">@name</span> + <span class="string">", age is "</span> + <span class="variable">@age</span>.to_s</div><div class="line">    <span class="keyword">if</span> <span class="variable">@motherland</span> == <span class="string">"China"</span></div><div class="line">      puts <span class="string">"I am a Chinese."</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">      puts <span class="string">"I am a foreigner."</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span>  <span class="comment"># talk方法结束</span></div><div class="line">  <span class="keyword">attr_writer</span> <span class="symbol">:motherland</span>  <span class="comment"># <span class="yardoctag">@motherland</span>的setter</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">p1 = <span class="constant">Person</span>.new(<span class="string">"Yilin"</span>, <span class="number">23</span>)</div><div class="line">p1.talk</div><div class="line"></div><div class="line">p2 = <span class="constant">Person</span>.new(<span class="string">"Ben"</span>)</div><div class="line">p2.motherland = <span class="string">"ABC"</span></div><div class="line">p2.talk</div></pre></td></tr></table></figure>

<p><code>initialize</code> 是初始化方法，相当于构造函数。<br>参数 <code>age</code> 有一个缺省值 <code>18</code>，可以在任何方法内使用缺省参数,而不仅仅是 <code>initialize</code>。<br>如果有缺省参数， 参数表必须以有缺省值的参数结尾。</p>
<p>注意我们定义了<code>@motherland</code>成员变量的setter：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2014/05/28/ruby_quickstart_notes_2/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
  
    <a href="/page/2/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:insaneguy.me">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/Diary/">Diary</a><small>1</small></li>
  
    <li><a href="/categories/Mathematics/">Mathematics</a><small>1</small></li>
  
    <li><a href="/categories/Programming/">Programming</a><small>17</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">Tag Cloud</h3>
  <div class="entry">
    <a href="/tags/C/" style="font-size: 15.00px;">C++</a><a href="/tags/Design-Pattern/" style="font-size: 10.00px;">Design Pattern</a><a href="/tags/Image-Processing/" style="font-size: 10.00px;">Image Processing</a><a href="/tags/Kinect/" style="font-size: 10.00px;">Kinect</a><a href="/tags/OpenCV/" style="font-size: 12.50px;">OpenCV</a><a href="/tags/Ruby/" style="font-size: 15.00px;">Ruby</a><a href="/tags/Scala/" style="font-size: 17.50px;">Scala</a><a href="/tags/coursera/" style="font-size: 20.00px;">coursera</a><a href="/tags/fp/" style="font-size: 17.50px;">fp</a><a href="/tags/graphics/" style="font-size: 12.50px;">graphics</a><a href="/tags/hexo/" style="font-size: 10.00px;">hexo</a><a href="/tags/lambda-expression/" style="font-size: 10.00px;">lambda expression</a><a href="/tags/notes/" style="font-size: 20.00px;">notes</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 insaneguy
  
</div>
<div class="clearfix"></div></footer>
  <script src="//libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            processEscapes: true
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</body>
</html>

<a href="https://github.com/insaneyilin"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/c6625ac1f3ee0a12250227cf83ce904423abf351/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f677261795f3664366436642e706e67" alt="F**k me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_gray_6d6d6d.png"></a>